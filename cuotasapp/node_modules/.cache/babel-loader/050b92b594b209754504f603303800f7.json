{"ast":null,"code":"import React from 'react';\nimport { useEffect } from 'react';\nimport Axios from 'axios';\nimport swal from '@sweetalert/with-react';\nimport { useHistory } from 'react-router-dom';\nimport { propTypes } from 'react-bootstrap/esm/Image';\nexport const AuthMiddleware = props => {\n  const history = useHistory();\n  const [auth, setAuth] = useState(false);\n  useEffect(() => {\n    Axios.get(\"http://localhost:5001/isAuth\", {\n      \"headers\": {\n        \"token\": localStorage.getItem(\"token\")\n      }\n    }).then(() => setAuth(true)).catch(() => {\n      swal(\"Debes estar logueado para acceder a este recurso\", \"\", \"error\").then(history.push(\"/\"));\n    });\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, auth ? props.children : null);\n};","map":{"version":3,"sources":["C:/Users/juanm/Documents/Proyecto_web/ProyectoFinal-IAW/cuotasapp/src/Middleware/AuthMiddleware.jsx"],"names":["React","useEffect","Axios","swal","useHistory","propTypes","AuthMiddleware","props","history","auth","setAuth","useState","get","localStorage","getItem","then","catch","push","children"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,SAAT,QAA0B,2BAA1B;AAEA,OAAO,MAAMC,cAAc,GAAIC,KAAD,IAAW;AACrC,QAAMC,OAAO,GAAGJ,UAAU,EAA1B;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBC,QAAQ,CAAC,KAAD,CAAhC;AAEAV,EAAAA,SAAS,CAAC,MAAM;AACZC,IAAAA,KAAK,CAACU,GAAN,CAAU,8BAAV,EAA0C;AAAC,iBAAW;AAAC,iBAASC,YAAY,CAACC,OAAb,CAAqB,OAArB;AAAV;AAAZ,KAA1C,EACKC,IADL,CACU,MAAML,OAAO,CAAC,IAAD,CADvB,EAEKM,KAFL,CAEW,MAAM;AACTb,MAAAA,IAAI,CAAC,kDAAD,EAAqD,EAArD,EAAyD,OAAzD,CAAJ,CACKY,IADL,CACUP,OAAO,CAACS,IAAR,CAAa,GAAb,CADV;AAEH,KALL;AAMH,GAPQ,CAAT;AASA,sBACI,0CACKR,IAAI,GAAGF,KAAK,CAACW,QAAT,GAAoB,IAD7B,CADJ;AAKH,CAlBM","sourcesContent":["import React from 'react'\r\nimport { useEffect } from 'react'\r\nimport Axios from 'axios'\r\nimport swal from '@sweetalert/with-react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { propTypes } from 'react-bootstrap/esm/Image';\r\n\r\nexport const AuthMiddleware = (props) => {\r\n    const history = useHistory();\r\n    const [auth, setAuth] = useState(false);\r\n\r\n    useEffect(() => {\r\n        Axios.get(\"http://localhost:5001/isAuth\", {\"headers\": {\"token\": localStorage.getItem(\"token\")}})\r\n            .then(() => setAuth(true))\r\n            .catch(() => {\r\n                swal(\"Debes estar logueado para acceder a este recurso\", \"\", \"error\")\r\n                    .then(history.push(\"/\"));\r\n            })\r\n    })\r\n\r\n    return(\r\n        <>\r\n            {auth ? props.children : null}\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}