{"ast":null,"code":"import React, { useState } from 'react';\nimport { useEffect } from 'react';\nimport Axios from 'axios';\nimport swal from '@sweetalert/with-react';\nimport { useHistory } from 'react-router-dom';\nexport const AuthMiddleware = props => {\n  const history = useHistory();\n  const [auth, setAuth] = useState(false);\n  useEffect(() => {\n    Axios.get(\"http://localhost:5001/isAuth\", {\n      \"headers\": {\n        \"token\": localStorage.getItem(\"token\")\n      }\n    }).then(() => setAuth(true)).catch(() => {\n      swal(\"Debes estar logueado para acceder a este recurso\", \"\", \"error\").then(history.push(\"/\"));\n    });\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, auth ? props.children : null);\n};","map":{"version":3,"sources":["C:/Users/juanm/Documents/Proyecto_web/ProyectoFinal-IAW/cuotasapp/src/Middleware/AuthMiddleware.jsx"],"names":["React","useState","useEffect","Axios","swal","useHistory","AuthMiddleware","props","history","auth","setAuth","get","localStorage","getItem","then","catch","push","children"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAO,MAAMC,cAAc,GAAIC,KAAD,IAAW;AACrC,QAAMC,OAAO,GAAGH,UAAU,EAA1B;AACA,QAAM,CAACI,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC,KAAD,CAAhC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZC,IAAAA,KAAK,CAACQ,GAAN,CAAU,8BAAV,EAA0C;AAAC,iBAAW;AAAC,iBAASC,YAAY,CAACC,OAAb,CAAqB,OAArB;AAAV;AAAZ,KAA1C,EACKC,IADL,CACU,MAAMJ,OAAO,CAAC,IAAD,CADvB,EAEKK,KAFL,CAEW,MAAM;AACTX,MAAAA,IAAI,CAAC,kDAAD,EAAqD,EAArD,EAAyD,OAAzD,CAAJ,CACKU,IADL,CACUN,OAAO,CAACQ,IAAR,CAAa,GAAb,CADV;AAEH,KALL;AAMH,GAPQ,CAAT;AASA,sBACI,0CACKP,IAAI,GAAGF,KAAK,CAACU,QAAT,GAAoB,IAD7B,CADJ;AAKH,CAlBM","sourcesContent":["import React, { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport Axios from 'axios'\r\nimport swal from '@sweetalert/with-react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport const AuthMiddleware = (props) => {\r\n    const history = useHistory();\r\n    const [auth, setAuth] = useState(false);\r\n\r\n    useEffect(() => {\r\n        Axios.get(\"http://localhost:5001/isAuth\", {\"headers\": {\"token\": localStorage.getItem(\"token\")}})\r\n            .then(() => setAuth(true))\r\n            .catch(() => {\r\n                swal(\"Debes estar logueado para acceder a este recurso\", \"\", \"error\")\r\n                    .then(history.push(\"/\"));\r\n            })\r\n    })\r\n\r\n    return(\r\n        <>\r\n            {auth ? props.children : null}\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}