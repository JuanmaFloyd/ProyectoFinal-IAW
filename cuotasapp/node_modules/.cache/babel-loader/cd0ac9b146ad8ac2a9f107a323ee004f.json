{"ast":null,"code":"'use strict';\n\nvar resolve = require('./resolve'),\n    util = require('./util'),\n    stableStringify = require('json-stable-stringify'),\n    async = require('../async');\n\nvar beautify;\n\nfunction loadBeautify() {\n  if (beautify === undefined) {\n    var name = 'js-beautify';\n\n    try {\n      beautify = require(name).js_beautify;\n    } catch (e) {\n      beautify = false;\n    }\n  }\n}\n\nvar validateGenerator = require('../dotjs/validate');\n/**\n * Functions below are used inside compiled validations function\n */\n\n\nvar co = require('co');\n\nvar ucs2length = util.ucs2length;\n\nvar equal = require('./equal'); // this error is thrown by async schemas to return validation errors via exception\n\n\nvar ValidationError = require('./validation_error');\n\nmodule.exports = compile;\n/**\n * Compiles schema to validation function\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Object} root object with information about the root schema for this schema\n * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution\n * @param  {String} baseId base ID for IDs in the schema\n * @return {Function} validation function\n */\n\nfunction compile(schema, root, localRefs, baseId) {\n  /* jshint validthis: true, evil: true */\n\n  /* eslint no-shadow: 0 */\n  var self = this,\n      opts = this._opts,\n      refVal = [undefined],\n      refs = {},\n      patterns = [],\n      patternsHash = {},\n      defaults = [],\n      defaultsHash = {},\n      customRules = [],\n      keepSourceCode = opts.sourceCode !== false;\n  root = root || {\n    schema: schema,\n    refVal: refVal,\n    refs: refs\n  };\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling) return compilation.callValidate = callValidate;\n  var formats = this._formats;\n  var RULES = this.RULES;\n\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (keepSourceCode) cv.sourceCode = v.sourceCode;\n    }\n\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n\n  function callValidate() {\n    var validate = compilation.validate;\n    var result = validate.apply(null, arguments);\n    callValidate.errors = validate.errors;\n    return result;\n  }\n\n  function localCompile(_schema, _root, localRefs, baseId) {\n    var isRoot = !_root || _root && _root.schema == _schema;\n    if (_root.schema != root.schema) return compile.call(self, _schema, _root, localRefs, baseId);\n    var $async = _schema.$async === true;\n    if ($async && !opts.transpile) async.setup(opts);\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot: isRoot,\n      baseId: baseId,\n      root: _root,\n      schemaPath: '',\n      errSchemaPath: '#',\n      errorPath: '\"\"',\n      RULES: RULES,\n      validate: validateGenerator,\n      util: util,\n      resolve: resolve,\n      resolveRef: resolveRef,\n      usePattern: usePattern,\n      useDefault: useDefault,\n      useCustomRule: useCustomRule,\n      opts: opts,\n      formats: formats,\n      self: self\n    });\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode) + vars(defaults, defaultCode) + vars(customRules, customRuleCode) + sourceCode;\n\n    if (opts.beautify) {\n      loadBeautify();\n      /* istanbul ignore else */\n\n      if (beautify) sourceCode = beautify(sourceCode, opts.beautify);else console.error('\"npm install js-beautify\" to use beautify option');\n    } // console.log('\\n\\n\\n *** \\n', sourceCode);\n\n\n    var validate,\n        validateCode,\n        transpile = opts._transpileFunc;\n\n    try {\n      validateCode = $async && transpile ? transpile(sourceCode) : sourceCode;\n      var makeValidate = new Function('self', 'RULES', 'formats', 'root', 'refVal', 'defaults', 'customRules', 'co', 'equal', 'ucs2length', 'ValidationError', validateCode);\n      validate = makeValidate(self, RULES, formats, root, refVal, defaults, customRules, co, equal, ucs2length, ValidationError);\n      refVal[0] = validate;\n    } catch (e) {\n      console.error('Error compiling schema, function code:', validateCode);\n      throw e;\n    }\n\n    validate.schema = _schema;\n    validate.errors = null;\n    validate.refs = refs;\n    validate.refVal = refVal;\n    validate.root = isRoot ? validate : _root;\n    if ($async) validate.$async = true;\n    if (keepSourceCode) validate.sourceCode = sourceCode;\n\n    if (opts.sourceCode === true) {\n      validate.source = {\n        patterns: patterns,\n        defaults: defaults\n      };\n    }\n\n    return validate;\n  }\n\n  function resolveRef(baseId, ref, isRoot) {\n    ref = resolve.url(baseId, ref);\n    var refIndex = refs[ref];\n\n    var _refVal, refCode;\n\n    if (refIndex !== undefined) {\n      _refVal = refVal[refIndex];\n      refCode = 'refVal[' + refIndex + ']';\n      return resolvedRef(_refVal, refCode);\n    }\n\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref];\n\n      if (rootRefId !== undefined) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n\n    refCode = addLocalRef(ref);\n    var v = resolve.call(self, localCompile, root, ref);\n\n    if (!v) {\n      var localSchema = localRefs && localRefs[ref];\n\n      if (localSchema) {\n        v = resolve.inlineRef(localSchema, opts.inlineRefs) ? localSchema : compile.call(self, localSchema, root, localRefs, baseId);\n      }\n    }\n\n    if (v) {\n      replaceLocalRef(ref, v);\n      return resolvedRef(v, refCode);\n    }\n  }\n\n  function addLocalRef(ref, v) {\n    var refId = refVal.length;\n    refVal[refId] = v;\n    refs[ref] = refId;\n    return 'refVal' + refId;\n  }\n\n  function replaceLocalRef(ref, v) {\n    var refId = refs[ref];\n    refVal[refId] = v;\n  }\n\n  function resolvedRef(refVal, code) {\n    return typeof refVal == 'object' ? {\n      code: code,\n      schema: refVal,\n      inline: true\n    } : {\n      code: code,\n      $async: refVal && refVal.$async\n    };\n  }\n\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n\n    if (index === undefined) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n\n    return 'pattern' + index;\n  }\n\n  function useDefault(value) {\n    switch (typeof value) {\n      case 'boolean':\n      case 'number':\n        return '' + value;\n\n      case 'string':\n        return util.toQuotedString(value);\n\n      case 'object':\n        if (value === null) return 'null';\n        var valueStr = stableStringify(value);\n        var index = defaultsHash[valueStr];\n\n        if (index === undefined) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n\n        return 'default' + index;\n    }\n  }\n\n  function useCustomRule(rule, schema, parentSchema, it) {\n    var validateSchema = rule.definition.validateSchema;\n\n    if (validateSchema && self._opts.validateSchema !== false) {\n      var valid = validateSchema(schema);\n\n      if (!valid) {\n        var message = 'keyword schema is invalid: ' + self.errorsText(validateSchema.errors);\n        if (self._opts.validateSchema == 'log') console.error(message);else throw new Error(message);\n      }\n    }\n\n    var compile = rule.definition.compile,\n        inline = rule.definition.inline,\n        macro = rule.definition.macro;\n    var validate;\n\n    if (compile) {\n      validate = compile.call(self, schema, parentSchema, it);\n    } else if (macro) {\n      validate = macro.call(self, schema, parentSchema, it);\n      if (opts.validateSchema !== false) self.validateSchema(validate, true);\n    } else if (inline) {\n      validate = inline.call(self, it, rule.keyword, schema, parentSchema);\n    } else {\n      validate = rule.definition.validate;\n    }\n\n    var index = customRules.length;\n    customRules[index] = validate;\n    return {\n      code: 'customRule' + index,\n      validate: validate\n    };\n  }\n}\n/**\n * Checks if the schema is currently compiled\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Object} object with properties \"index\" (compilation index) and \"compiling\" (boolean)\n */\n\n\nfunction checkCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0) return {\n    index: index,\n    compiling: true\n  };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema: schema,\n    root: root,\n    baseId: baseId\n  };\n  return {\n    index: index,\n    compiling: false\n  };\n}\n/**\n * Removes the schema from the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n */\n\n\nfunction endCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0) this._compilations.splice(i, 1);\n}\n/**\n * Index of schema compilation in the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Integer} compilation index\n */\n\n\nfunction compIndex(schema, root, baseId) {\n  /* jshint validthis: true */\n  for (var i = 0; i < this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId) return i;\n  }\n\n  return -1;\n}\n\nfunction patternCode(i, patterns) {\n  return 'var pattern' + i + ' = new RegExp(' + util.toQuotedString(patterns[i]) + ');';\n}\n\nfunction defaultCode(i) {\n  return 'var default' + i + ' = defaults[' + i + '];';\n}\n\nfunction refValCode(i, refVal) {\n  return refVal[i] ? 'var refVal' + i + ' = refVal[' + i + '];' : '';\n}\n\nfunction customRuleCode(i) {\n  return 'var customRule' + i + ' = customRules[' + i + '];';\n}\n\nfunction vars(arr, statement) {\n  if (!arr.length) return '';\n  var code = '';\n\n  for (var i = 0; i < arr.length; i++) code += statement(i, arr);\n\n  return code;\n}","map":{"version":3,"sources":["C:/Users/juanm/Documents/Proyecto_web/ProyectoFinal-IAW/cuotasapp/node_modules/mercadopago/node_modules/ajv/lib/compile/index.js"],"names":["resolve","require","util","stableStringify","async","beautify","loadBeautify","undefined","name","js_beautify","e","validateGenerator","co","ucs2length","equal","ValidationError","module","exports","compile","schema","root","localRefs","baseId","self","opts","_opts","refVal","refs","patterns","patternsHash","defaults","defaultsHash","customRules","keepSourceCode","sourceCode","c","checkCompiling","call","compilation","_compilations","index","compiling","callValidate","formats","_formats","RULES","v","localCompile","validate","cv","errors","$async","endCompiling","result","apply","arguments","_schema","_root","isRoot","transpile","setup","isTop","schemaPath","errSchemaPath","errorPath","resolveRef","usePattern","useDefault","useCustomRule","vars","refValCode","patternCode","defaultCode","customRuleCode","console","error","validateCode","_transpileFunc","makeValidate","Function","source","ref","url","refIndex","_refVal","refCode","resolvedRef","rootRefId","addLocalRef","localSchema","inlineRef","inlineRefs","replaceLocalRef","refId","length","code","inline","regexStr","value","toQuotedString","valueStr","rule","parentSchema","it","validateSchema","definition","valid","message","errorsText","Error","macro","keyword","compIndex","i","splice","arr","statement"],"mappings":"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","sourcesContent":["'use strict';\n\nvar resolve = require('./resolve')\n  , util = require('./util')\n  , stableStringify = require('json-stable-stringify')\n  , async = require('../async');\n\nvar beautify;\n\nfunction loadBeautify(){\n  if (beautify === undefined) {\n    var name = 'js-beautify';\n    try { beautify = require(name).js_beautify; }\n    catch(e) { beautify = false; }\n  }\n}\n\nvar validateGenerator = require('../dotjs/validate');\n\n/**\n * Functions below are used inside compiled validations function\n */\n\nvar co = require('co');\nvar ucs2length = util.ucs2length;\nvar equal = require('./equal');\n\n// this error is thrown by async schemas to return validation errors via exception\nvar ValidationError = require('./validation_error');\n\nmodule.exports = compile;\n\n\n/**\n * Compiles schema to validation function\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Object} root object with information about the root schema for this schema\n * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution\n * @param  {String} baseId base ID for IDs in the schema\n * @return {Function} validation function\n */\nfunction compile(schema, root, localRefs, baseId) {\n  /* jshint validthis: true, evil: true */\n  /* eslint no-shadow: 0 */\n  var self = this\n    , opts = this._opts\n    , refVal = [ undefined ]\n    , refs = {}\n    , patterns = []\n    , patternsHash = {}\n    , defaults = []\n    , defaultsHash = {}\n    , customRules = []\n    , keepSourceCode = opts.sourceCode !== false;\n\n  root = root || { schema: schema, refVal: refVal, refs: refs };\n\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling) return (compilation.callValidate = callValidate);\n\n  var formats = this._formats;\n  var RULES = this.RULES;\n\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (keepSourceCode) cv.sourceCode = v.sourceCode;\n    }\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n\n  function callValidate() {\n    var validate = compilation.validate;\n    var result = validate.apply(null, arguments);\n    callValidate.errors = validate.errors;\n    return result;\n  }\n\n  function localCompile(_schema, _root, localRefs, baseId) {\n    var isRoot = !_root || (_root && _root.schema == _schema);\n    if (_root.schema != root.schema)\n      return compile.call(self, _schema, _root, localRefs, baseId);\n\n    var $async = _schema.$async === true;\n    if ($async && !opts.transpile) async.setup(opts);\n\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot: isRoot,\n      baseId: baseId,\n      root: _root,\n      schemaPath: '',\n      errSchemaPath: '#',\n      errorPath: '\"\"',\n      RULES: RULES,\n      validate: validateGenerator,\n      util: util,\n      resolve: resolve,\n      resolveRef: resolveRef,\n      usePattern: usePattern,\n      useDefault: useDefault,\n      useCustomRule: useCustomRule,\n      opts: opts,\n      formats: formats,\n      self: self\n    });\n\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode)\n                   + vars(defaults, defaultCode) + vars(customRules, customRuleCode)\n                   + sourceCode;\n\n    if (opts.beautify) {\n      loadBeautify();\n      /* istanbul ignore else */\n      if (beautify) sourceCode = beautify(sourceCode, opts.beautify);\n      else console.error('\"npm install js-beautify\" to use beautify option');\n    }\n    // console.log('\\n\\n\\n *** \\n', sourceCode);\n    var validate, validateCode\n      , transpile = opts._transpileFunc;\n    try {\n      validateCode = $async && transpile\n                      ? transpile(sourceCode)\n                      : sourceCode;\n\n      var makeValidate = new Function(\n        'self',\n        'RULES',\n        'formats',\n        'root',\n        'refVal',\n        'defaults',\n        'customRules',\n        'co',\n        'equal',\n        'ucs2length',\n        'ValidationError',\n        validateCode\n      );\n\n      validate = makeValidate(\n        self,\n        RULES,\n        formats,\n        root,\n        refVal,\n        defaults,\n        customRules,\n        co,\n        equal,\n        ucs2length,\n        ValidationError\n      );\n\n      refVal[0] = validate;\n    } catch(e) {\n      console.error('Error compiling schema, function code:', validateCode);\n      throw e;\n    }\n\n    validate.schema = _schema;\n    validate.errors = null;\n    validate.refs = refs;\n    validate.refVal = refVal;\n    validate.root = isRoot ? validate : _root;\n    if ($async) validate.$async = true;\n    if (keepSourceCode) validate.sourceCode = sourceCode;\n    if (opts.sourceCode === true) {\n      validate.source = {\n        patterns: patterns,\n        defaults: defaults\n      };\n    }\n\n    return validate;\n  }\n\n  function resolveRef(baseId, ref, isRoot) {\n    ref = resolve.url(baseId, ref);\n    var refIndex = refs[ref];\n    var _refVal, refCode;\n    if (refIndex !== undefined) {\n      _refVal = refVal[refIndex];\n      refCode = 'refVal[' + refIndex + ']';\n      return resolvedRef(_refVal, refCode);\n    }\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref];\n      if (rootRefId !== undefined) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n\n    refCode = addLocalRef(ref);\n    var v = resolve.call(self, localCompile, root, ref);\n    if (!v) {\n      var localSchema = localRefs && localRefs[ref];\n      if (localSchema) {\n        v = resolve.inlineRef(localSchema, opts.inlineRefs)\n            ? localSchema\n            : compile.call(self, localSchema, root, localRefs, baseId);\n      }\n    }\n\n    if (v) {\n      replaceLocalRef(ref, v);\n      return resolvedRef(v, refCode);\n    }\n  }\n\n  function addLocalRef(ref, v) {\n    var refId = refVal.length;\n    refVal[refId] = v;\n    refs[ref] = refId;\n    return 'refVal' + refId;\n  }\n\n  function replaceLocalRef(ref, v) {\n    var refId = refs[ref];\n    refVal[refId] = v;\n  }\n\n  function resolvedRef(refVal, code) {\n    return typeof refVal == 'object'\n            ? { code: code, schema: refVal, inline: true }\n            : { code: code, $async: refVal && refVal.$async };\n  }\n\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n    if (index === undefined) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n    return 'pattern' + index;\n  }\n\n  function useDefault(value) {\n    switch (typeof value) {\n      case 'boolean':\n      case 'number':\n        return '' + value;\n      case 'string':\n        return util.toQuotedString(value);\n      case 'object':\n        if (value === null) return 'null';\n        var valueStr = stableStringify(value);\n        var index = defaultsHash[valueStr];\n        if (index === undefined) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n        return 'default' + index;\n    }\n  }\n\n  function useCustomRule(rule, schema, parentSchema, it) {\n    var validateSchema = rule.definition.validateSchema;\n    if (validateSchema && self._opts.validateSchema !== false) {\n      var valid = validateSchema(schema);\n      if (!valid) {\n        var message = 'keyword schema is invalid: ' + self.errorsText(validateSchema.errors);\n        if (self._opts.validateSchema == 'log') console.error(message);\n        else throw new Error(message);\n      }\n    }\n\n    var compile = rule.definition.compile\n      , inline = rule.definition.inline\n      , macro = rule.definition.macro;\n\n    var validate;\n    if (compile) {\n      validate = compile.call(self, schema, parentSchema, it);\n    } else if (macro) {\n      validate = macro.call(self, schema, parentSchema, it);\n      if (opts.validateSchema !== false) self.validateSchema(validate, true);\n    } else if (inline) {\n      validate = inline.call(self, it, rule.keyword, schema, parentSchema);\n    } else {\n      validate = rule.definition.validate;\n    }\n\n    var index = customRules.length;\n    customRules[index] = validate;\n\n    return {\n      code: 'customRule' + index,\n      validate: validate\n    };\n  }\n}\n\n\n/**\n * Checks if the schema is currently compiled\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Object} object with properties \"index\" (compilation index) and \"compiling\" (boolean)\n */\nfunction checkCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0) return { index: index, compiling: true };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema: schema,\n    root: root,\n    baseId: baseId\n  };\n  return { index: index, compiling: false };\n}\n\n\n/**\n * Removes the schema from the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n */\nfunction endCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0) this._compilations.splice(i, 1);\n}\n\n\n/**\n * Index of schema compilation in the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Integer} compilation index\n */\nfunction compIndex(schema, root, baseId) {\n  /* jshint validthis: true */\n  for (var i=0; i<this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId) return i;\n  }\n  return -1;\n}\n\n\nfunction patternCode(i, patterns) {\n  return 'var pattern' + i + ' = new RegExp(' + util.toQuotedString(patterns[i]) + ');';\n}\n\n\nfunction defaultCode(i) {\n  return 'var default' + i + ' = defaults[' + i + '];';\n}\n\n\nfunction refValCode(i, refVal) {\n  return refVal[i] ? 'var refVal' + i + ' = refVal[' + i + '];' : '';\n}\n\n\nfunction customRuleCode(i) {\n  return 'var customRule' + i + ' = customRules[' + i + '];';\n}\n\n\nfunction vars(arr, statement) {\n  if (!arr.length) return '';\n  var code = '';\n  for (var i=0; i<arr.length; i++)\n    code += statement(i, arr);\n  return code;\n}\n"]},"metadata":{},"sourceType":"script"}